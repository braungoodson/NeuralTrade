<?php

require_once('btce-api.php');

$key = $argv[2];
$secret = $argv[4];

$api = new BTCeAPI($key,$secret);

if ($argv[5] == "--buy") {

	$btc = floatval($argv[6]);
	$price = floatval($argv[8]);

	try {

		echo json_encode($api->makeOrder($btc,'btc_usd',BTCeAPI::DIRECTION_BUY,$price));

	} catch (BTCeAPIInvalidParameterException $e) {

	  echo $e->getMessage();

	} catch (BTCeAPIException $e) {

	  echo $e->getMessage();

	}

} else if ($argv[5] == "--sell") {

	$btc = floatval($argv[6]);
	$price = floatval($argv[8]);
	
	try {

		echo json_encode($api->makeOrder($btc,'btc_usd',BTCeAPI::DIRECTION_SELL,$price));

	} catch (BTCeAPIInvalidParameterException $e) {

	  echo $e->getMessage();

	} catch (BTCeAPIException $e) {

	  echo $e->getMessage();

	}

}


?>